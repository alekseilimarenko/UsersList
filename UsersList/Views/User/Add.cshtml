@model UsersList.Models.User

@{
    ViewBag.Title = "Add User";
}

@using (Html.BeginForm("Add", "User", FormMethod.Post, new { enctype = "multipart/form-data", id = "addForm"}))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.UserId)

    <fieldset>
        <legend>Add User to List</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.UserName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserName)
            @Html.ValidationMessageFor(model => model.UserName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.UserEmail)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserEmail)
            @Html.ValidationMessageFor(model => model.UserEmail)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.SkypeLogin)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SkypeLogin)
            @Html.ValidationMessageFor(model => model.SkypeLogin)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Signature)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Signature)
        </div>
        <div class="editor-field">
            <label>Avatar:</label>
            @if (Model != null)
            {
                if (Model.UserAvatar == null)
                {
                    @:None
                }
                else
                {
                    <img width="75" height="75" src="@Url.Action("GetImage", "User", new { Model.UserId})" />
                }
            }
            <div>
                Upload new image:
                <input type="file" name="Image"/>
            </div>
        </div>
    </fieldset>

    <input type="submit" value="Save"/>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#addForm').change(function (e) {
                var user = {
                    
                }
                e.preventDefault();
                alert("Handler for .change() called.");
                $.ajax({
                    url: 'User/Add',
                    type: 'POST',
                    data: $(this).serialize(),
                    success: function (result) {
                                                
                    }
                });
            });
        });
    </script>
}
